const u={functionUrl:"https://cloudbase-5guq06yfe657e091.service.tcloudbase.com/question-bank-api"},a=()=>u.functionUrl,c=()=>localStorage.getItem("token"),o=async(t,s={})=>{const r=c();try{const e=await fetch(a(),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...r&&{Authorization:`Bearer ${r}`}},credentials:"include",body:JSON.stringify({action:t,...s})});if(!e.ok){const i=await e.json().catch(()=>({}));throw new Error(i.message||`HTTP ${e.status}: ${e.statusText}`)}const n=await e.json();if(n.code&&n.code!==200)throw new Error(n.message||"请求失败");return n}catch(e){throw console.error("云函数调用失败:",e),e.message.includes("CORS")||e.message.includes("blocked")?new Error("跨域请求被阻止，请检查云函数CORS配置"):e}},g={getList:(t={})=>o("question.getList",t),getDetail:t=>o("question.getDetail",{id:t}),getRandom:(t={})=>o("question.getRandom",t),importQuestions:t=>o("question.importQuestions",{questions:t}),getStats:()=>o("question.getStats")},l={login:t=>o("user.login",t),getUserInfo:()=>o("user.getInfo")};export{g as q,l as u};
