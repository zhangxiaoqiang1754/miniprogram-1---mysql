import{_ as b,r as g,a as h,c as V,o as x,b as o,d as l,w as a,e as y,f as t,u as k,g as I,E as c}from"./index-B1SCr1Lx.js";import{u as L}from"./question-DcQDR6Ok.js";const N={class:"login-container"},R={class:"login-box"},S={__name:"Login",setup(z){const f=k(),n=g(null),i=g(!1),s=h({phone:"",password:""}),_={phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},p=async()=>{if(n.value)try{await n.value.validate(),i.value=!0;const r=await L.login({phone:s.phone,password:s.password});localStorage.setItem("token",r.data.token),localStorage.setItem("userInfo",JSON.stringify(r.data.user)),c.success("登录成功"),f.push("/dashboard")}catch(r){console.error("登录失败：",r),c.error(r.message||"登录失败")}finally{i.value=!1}};return(r,e)=>{const m=t("el-input"),u=t("el-form-item"),w=t("el-button"),v=t("el-form");return x(),V("div",N,[o("div",R,[e[3]||(e[3]=o("div",{class:"login-header"},[o("h2",null,"刷题小程序管理系统"),o("p",null,"管理员登录")],-1)),l(v,{ref_key:"loginFormRef",ref:n,model:s,rules:_,class:"login-form",onSubmit:y(p,["prevent"])},{default:a(()=>[l(u,{prop:"phone"},{default:a(()=>[l(m,{modelValue:s.phone,"onUpdate:modelValue":e[0]||(e[0]=d=>s.phone=d),placeholder:"请输入手机号","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),l(u,{prop:"password"},{default:a(()=>[l(m,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=d=>s.password=d),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),l(u,null,{default:a(()=>[l(w,{type:"primary",size:"large",class:"login-btn",loading:i.value,onClick:p},{default:a(()=>e[2]||(e[2]=[I(" 登录 ",-1)])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["model"]),e[4]||(e[4]=o("div",{class:"login-tips"},[o("p",null,"默认管理员账户："),o("p",null,"手机号：13800138000"),o("p",null,"密码：admin123")],-1))])])}}},E=b(S,[["__scopeId","data-v-e5513b02"]]);export{E as default};
